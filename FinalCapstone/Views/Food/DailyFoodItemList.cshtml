@using Microsoft.AspNetCore.Http
@model DailyFoodItemList
@{
    ViewData["Title"] = "User Daily Foods";
}

<h2>Daily Foods</h2>
<br />
<table>
    <thead>
        <tr>
            <td>Description</td>
            <td>Protein</td>
            <td>Carbohydrates</td>
            <td>Fat</td>
        </tr>
    </thead>
    @{
        int totalProtein = 0;
        int totalFat = 0;
        int totalCarbs = 0; }

    @foreach (var item in Model.Items)
    {
        <tr>
            <td>
                <a asp-controller="Food" asp-action="FoodDetail" asp-route-id="@item.FoodId">
                    <input type="hidden" asp-for="@item.FoodId" />
                    @item.FoodName
                </a>

            </td>
            <td>@item.Protein</td>
            <td>@item.Fat</td>
            <td>@item.Carbs</td>

            @{
                totalProtein += item.Protein;
                totalFat += item.Fat;
                totalCarbs += item.Carbs;
            }

        </tr>
    }
    @if (Context.Session.GetString(SessionKeys.Username) != null)
    {
        <tfoot>
            <tr>
                <td>Personal Goals:</td>
                
                <td>@Model.User.GoalProtein</td>
                <td>@Model.User.GoalCarbs</td>
                <td>@Model.User.GoalFat</td>
                
            </tr>
        </tfoot>
    }
    <tfoot>
        <tr>
            <td>Totals:</td>
            <td>@totalProtein</td>
            <td>@totalFat</td>
            <td>@totalCarbs</td>
        </tr>
    </tfoot>


</table>

